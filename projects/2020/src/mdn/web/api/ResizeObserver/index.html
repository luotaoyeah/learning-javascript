<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>ResizeObserver</title>

        <style>
            button {
                position: relative;
                display: inline-block;
                padding: 6px 12px;
                font-size: 13px;
                font-weight: 700;
                line-height: 20px;
                color: #333333;
                white-space: nowrap;
                vertical-align: middle;
                cursor: pointer;
                background-color: #eeeeee;
                background-image: linear-gradient(#fcfcfc, #eeeeee);
                border: 1px solid #d5d5d5;
                border-radius: 3px;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                -webkit-appearance: none;
            }

            textarea {
                border-radius: 3px;
                border: 1px solid #d5d5d5;
            }
        </style>
    </head>
    <body>
        <textarea id="textarea01" style="max-width: 100%; min-width: 100px; min-height: 50px; width: 200px; height: 100px"></textarea>

        <hr />

        <button id="btn01">订阅</button>
        <button id="btn02">退订</button>

        <script>
            const resizeObserver = new ResizeObserver((entries, observer) => {
                console.log(entries[0].contentRect.width, entries[0].contentRect.height);
            });

            document.querySelector('#btn01').addEventListener('click', () => {
                resizeObserver.observe(document.querySelector('#textarea01'), {});
            });

            document.querySelector('#btn02').addEventListener('click', () => {
                // 退订对所有元素的监听
                // resizeObserver.disconnect();

                // 退订对某个元素的监听
                resizeObserver.unobserve(document.querySelector('#textarea01'));
            });
        </script>
    </body>
</html>
