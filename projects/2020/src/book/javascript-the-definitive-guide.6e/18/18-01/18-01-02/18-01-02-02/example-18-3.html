<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example 18-3. Parsing the HTTP response</title>
    <style></style>
    <script>
      window.onload = function() {

        const xmlHttpRequest = new XMLHttpRequest();
        xmlHttpRequest.open("GET", "http://localhost:8888/xml");
        xmlHttpRequest.onreadystatechange = function() {
          if (xmlHttpRequest.readyState === 4 && xmlHttpRequest.status === 200) {
            const responseHeader = xmlHttpRequest.getResponseHeader("Content-Type");
            if (/(xml)/.test(responseHeader)) {
              console.log(xmlHttpRequest.responseXML);
            } else if (/(json)/.test(responseHeader)) {
              console.log(JSON.parse(xmlHttpRequest.responseText));
            } else {
              console.log(xmlHttpRequest.responseText);
            }
          }
        };
        xmlHttpRequest.send();
      };
    </script>
  </head>
  <body></body>
</html>
