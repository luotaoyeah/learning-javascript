<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example 17-6. Filtering user input</title>
    <style>
      input {
        border-radius: 3px;
        padding: 5px;
      }
    </style>
    <script>
      window.onload = function() {
        const inputEls = document.querySelectorAll("input[type=\"text\"]");
        for (var i = 0; i < inputEls.length; i++) {
          const inputEl = inputEls[i];
          inputEl.addEventListener("textInput", handleTextInput, false);
        }

        function handleTextInput(e) {
          /*
           * 标签的 data-allowed-chars 自定义属性,
           * 表示标签支持输入的字符；
           */
          const chars = this.getAttribute("data-allowed-chars");
          const char = e.data;
          if (chars.indexOf(char) === -1) {
            /*
             * 如果输入了不支持的字符, 则取消事件的默认行为,
             * 即阻止输入；
             */
            e.preventDefault();
          }
        }
      };
    </script>
  </head>
  <body>
    <input
        type="text"
        data-allowed-chars="abc"
    >
    <input
        type="text"
        data-allowed-chars="123"
    >
  </body>
</html>
