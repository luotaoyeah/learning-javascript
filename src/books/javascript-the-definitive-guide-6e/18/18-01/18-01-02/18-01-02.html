<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>18.1.2 Retrieving the Response</title>
    <style></style>
    <script>
      window.onload = function() {
        /*
         * XMLHttpRequest.readyState 属性，
         * 表示该请求的状态，可选值为：
         *     XMLHttpRequest.UNSENT（0）：XMLHttpRequest.open() 方面还未调用；
         *     XMLHttpRequest.OPENED（1）：XMLHttpRequest.open() 方面调用之后；
         *     XMLHttpRequest.HEADERS_RECEIVED（2）：接收到响应头；
         *     XMLHttpRequest.LOADING（3）：正在接收响应体；
         *     XMLHttpRequest.DONE（4）：响应完成；
         */

        const xmlHttpRequest = new XMLHttpRequest();
        xmlHttpRequest.open("GET", "http://localhost:8888");
        xmlHttpRequest.onreadystatechange = function(e) {
          /*
           * 在实际情况下，只有 XMLHttpRequest.readyState 变为 2，3，4 时，
           * 才会触发 readystatechange 事件；
           */
          if (xmlHttpRequest.readyState === 4) {
            /*
             * XMLHttpRequest.status 属性，
             * 表示响应的状态码，如：200，304，400；
             */
            console.log("XMLHttpRequest.status:", xmlHttpRequest.status);

            /*
             * XMLHttpRequest.statusText 属性，
             * 表示响应的状态的文本描述，如：200（OK），404（Not Found）；
             */
            console.log("XMLHttpRequest.statusText:", xmlHttpRequest.statusText);

            /*
             * XMLHttpRequest.responseText 属性，
             * 表示响应的文本形式；
             */
            console.log("XMLHttpRequest.responseText:", xmlHttpRequest.responseText);

            /*
             * XMLHttpRequest.responseXML 属性，
             * 表示响应的 XML（XHTML）形式；
             */
            console.log("XMLHttpRequest.responseXML:", xmlHttpRequest.responseXML);

            /*
             * XMLHttpRequest.getAllResponseHeaders() 方法，
             * 获取所有响应头；
             */
            console.log(xmlHttpRequest.getAllResponseHeaders());
          }
        };
        xmlHttpRequest.send();
      };
    </script>
  </head>
  <body></body>
</html>
