<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example 18-12. Implementing timeouts</title>
    <style></style>
    <script>
      window.onload = function() {
        const xmlHttpRequest = new XMLHttpRequest();
        /*
         * XMLHttpRequest.timeout 属性，
         * 用于设置 XHR 请求的超时时间，单位毫秒，
         * 如果在这个时间内，请求没有完成，
         * 则请求会被终止，并触发 timeout 事件；
         */
        xmlHttpRequest.timeout = 3000;
        xmlHttpRequest.open("GET", "http://localhost:8888");
        xmlHttpRequest.onload = function() {
          if (xmlHttpRequest.status === 200) {
            console.log(xmlHttpRequest.response);
          }
        };
        xmlHttpRequest.ontimeout = function() {
          console.log("ontimeout");
        };

        /*
                xmlHttpRequest.onabort = function() {
                  console.log("onabort");
                };
                setTimeout(function() {
                  if (xmlHttpRequest.readyState !== 4) {
                    xmlHttpRequest.abort();
                  }
                }, 3000);
        */

        xmlHttpRequest.send();
      };
    </script>
  </head>
  <body></body>
</html>
