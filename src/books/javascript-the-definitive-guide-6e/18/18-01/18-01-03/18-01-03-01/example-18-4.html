<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example 18-4. Encoding an object for an HTTP request</title>
    <style></style>
    <script>
      window.onload = function() {
        /**
         * 将 JS 对象编码为 form 表单数据；
         * @param obj
         * @return {string}
         */
        function encodeFormData(obj) {
          if (!obj) {
            return "";
          }

          var pairs = [];
          for (var name in obj) {
            if (!obj.hasOwnProperty(name)) {
              continue;
            }

            if (typeof obj[name] === "function") {
              continue;
            }

            var value = encodeURIComponent(obj[name].toString().replace(" ", "+"));
            name = encodeURIComponent(name.replace(" ", "+"));
            pairs.push(name + "=" + value);
          }
          return pairs.join("&");
        }

        /* name=foo&age=18 */
        console.log(encodeFormData({
          name: "foo",
          age: 18
        }));
      };
    </script>
  </head>
  <body></body>
</html>
