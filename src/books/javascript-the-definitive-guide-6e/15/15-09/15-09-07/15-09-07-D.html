<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>15-09-07</title>
    <script>
      window.onload = function() {
        console.log("\n-------------------------------------------------- 01");
        const buttonEl01 = document.getElementById("button01");
        const selectEl01 = document.getElementById("select01");

        buttonEl01.onclick = function() {
          /*
           * 对于单选列表，通过 HTMLSelectElement.selectedIndex 设置当前选中的项，
           * 此时，不会触发它的 onchange 事件；
           */
          selectEl01.selectedIndex = 1;
        };

        selectEl01.onchange = function() {
          /*
           * 对于单选列表，通过 HTMLSelectElement.selectedIndex 获取当前选中的项；
           */
          console.log(selectEl01.selectedIndex);
        };

        /*
         * 对于多选列表，它的 HTMLSelectElement.selectedIndex 始终为 0，
         * 需要通过它的每一个 option 的 selected 属性来获取当前选中的项；
         */
        const selectEl02 = document.getElementById("select02");
        selectEl02.onchange = function() {
          console.log(selectEl01.selectedIndex);

          console.log(
            Array.prototype.map.call(
              Array.prototype.filter.call(selectEl02.options, item => item.selected),
              item => item.value
            )
          );
        };
      };
    </script>
  </head>
  <body>
    <form
        id="form01"
        name="form01"
        action="#"
    >
      <button id="button01">select B</button>
      <select id="select01">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
      </select>
      <select
          id="select02"
          multiple
      >
        <option value="">请选择</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
      </select>
    </form>
  </body>
</html>
