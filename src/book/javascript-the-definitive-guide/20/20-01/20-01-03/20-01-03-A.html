<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>20.1.3 Storage Events</title>
    <script>
      window.onload = function() {
        /*
         * 当 localStorage 的数据发生变化时, 会触发 storage 事件；
         * 该事件只会通知除当前 window 之外的,
         * 其他共享该 localStorage 的 window 对象；
         * 即, 如果多个浏览器窗口访问的同源的文档,
         * 则其中一个窗口中修改了数据,
         * 则其他的窗口会触发 storage 事件；
         *
         * 对于 sessionStorage 来说, 当存在多个 iframe 时,
         * 其他的 iframe 会触发该事件；
         */

        /*
         * 对于 storage 事件的回调函数, 应该绑定到 window 对象上；
         */
        window.onstorage = function(e) {
          console.log("onstorage");
        };
        window.addEventListener("storage", function(e) {
          console.log("storageg");
        });
      };
    </script>
  </head>
  <body>
  </body>
</html>
