<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>17.4 Document Load Events</title>
    <script>
      /*
       * document 的 DOMContentLoaded 事件会在文档加载并解析完成,
       * 同时所有 defer 脚本执行完成之后触发；
       * 此时可能还有图片正在下载, 或者 async 脚本还在下载和执行；
       */
      document.addEventListener("DOMContentLoaded", function() {
        console.log("DOMContentLoaded");
      });

      /*
       * window 的 load 事件会在文档加载并解析完成之后执行,
       * 此时所有的图片已经加载完成,
       * 所有的 defer 和 async 脚本已经加载并执行完成；
       */
      window.addEventListener("load", function() {
        console.log("load");
      });

      /*
       * 在文档加载和解析过程中, document.readyState 属性会不断变化,
       * 同时, readystatechange 事件会触发；
       */
      document.addEventListener("readystatechange", function(e) {
        console.log("document.readyState", document.readyState);
      });
    </script>
  </head>
  <body>
    <script>
      console.log("foo");
    </script>
    <script
        defer
        src="./17-04.js"
    >
    </script>
    <script>
      console.log("bar");
    </script>
  </body>
</html>
