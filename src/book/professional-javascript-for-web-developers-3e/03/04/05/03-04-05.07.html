<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>the-number-type</title>

    <script>
      'use strict';

      /*
       * 将其他类型的值转换为 number 类型, 有三种方式:
       *   1. Number() 转换任意类型的值
       *   2. parseInt() 主要用于转换 string 类型的值
       *   3. parseFloat() 主要用于转换 string 类型的值
       */

      console.assert(Number(true) === 1);
      console.assert(Number(false) === 0);
      console.assert(Number(null) === 0);
      console.assert(Number.isNaN(Number(undefined)));

      /*
       * 空字符串转换为 0
       */
      console.assert(Number('') === 0);
      console.assert(Number(' ') === 0);

      /*
       * 支持转换十进制整数, 前面的空格和 0 会被忽略, 支持正负号
       */
      console.assert(Number('+009') === 9);

      /*
       * 支持转换十六进制数, 0x 前面不能有其他字符, 0x 后面紧挨着的 0 会被忽略, 支持正负号
       */
      console.assert(Number('0x0000f') === 15);
      console.assert(Number(' 0x0000f') === 15);

      /*
       * 支持转换浮点数, 前面的空格和 0 会被忽略
       */
      console.assert(Number('-03.14') === -3.14);
      console.assert(Number(' -03.14') === -3.14);

      /*
       * 支持科学计数法
       */
      console.assert(Number('3.14e2') === 314);

      /*
       * 只要包含任意非法字符, 转换结果就为 NaN
       */
      console.assert(Number.isNaN(Number('1f')));
      console.assert(Number.isNaN(Number('3.14.5')));

      /*
       * 转换 object 类型时, 会优先转换其 valueOf() 方法的返回值,
       * 如果没有 valueOf() 方法, 则会转换其 toString() 方法的返回值
       */
      console.assert(
        Number({
          valueOf: function () {
            return 1;
          },
          toString: function () {
            return 2;
          },
        }) === 1,
      );
      console.assert(
        Number({
          toString: function () {
            return 2;
          },
        }) === 2,
      );
    </script>
  </head>
  <body></body>
</html>
